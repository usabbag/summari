javascript:(function(){function e(){return window.location.href}function t(){return document.body.innerText}function n(){const e=document.createElement("div");e.id="summaryLoader",e.style.cssText="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:rgba(0,0,0,0.7);color:white;padding:20px;border-radius:10px;z-index:10001;font-family:Arial,sans-serif;",e.textContent="Summarizing...",document.body.appendChild(e)}function o(){const e=document.getElementById("summaryLoader");e&&document.body.removeChild(e)}function r(e,t){if(document.getElementById("summaryModal"))return;const n=document.createElement("div");n.id="summaryModal",n.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:10000";const o=document.createElement("div");o.style.cssText="background-color:#fff;padding:20px;border-radius:8px;max-width:80%;max-height:80%;overflow-y:auto",o.innerHTML=`<h2>Page Summary</h2><p><strong>Source: ${t}</strong></p><p>${e}</p><button id="closeModal">Close</button>`,n.appendChild(o),document.body.appendChild(n),document.getElementById("closeModal").addEventListener("click",()=>{document.body.removeChild(n)})}async function a(e,t){const n=await fetch("https://ulysse-propermaroonswordtail.web.val.run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,text:t}),mode:"cors",credentials:"include"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).summary}async function i(){const i=e();n();try{const e=await a(i);o(),r(e,"URL")}catch(e){console.error("Error summarizing URL:",e);try{const e=t(),n=await a(null,e);o(),r(n,"Page Text")}catch(e){console.error("Error summarizing text content:",e),o(),alert("Failed to summarize the page. Please try again later.")}}}i()})();
