javascript:(function(){function e(){return window.location.href}function t(){return document.body.innerText}function n(e,t){if(document.getElementById("summaryModal"))return;const n=document.createElement("div");n.id="summaryModal",n.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:10000";const o=document.createElement("div");o.style.cssText="background-color:#fff;padding:20px;border-radius:8px;max-width:80%;max-height:80%;overflow-y:auto",o.innerHTML=`<h2>Page Summary</h2><p><strong>Source: ${t}</strong></p><p>${e}</p><button id="closeModal">Close</button>`,n.appendChild(o),document.body.appendChild(n),document.getElementById("closeModal").addEventListener("click",()=>{document.body.removeChild(n)})}async function o(e,t){const n=await fetch("https://ulysse-propermaroonswordtail.web.val.run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,text:t}),mode:"cors",credentials:"include"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).summary}async function r(){const r=e();try{const e=await o(r);n(e,"URL")}catch(e){console.error("Error summarizing URL:",e);try{const e=t(),r=await o(null,e);n(r,"Page Text")}catch(e){console.error("Error summarizing text content:",e),alert("Failed to summarize the page. Please try again later.")}}}r()})();
